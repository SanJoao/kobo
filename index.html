<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koby</title>
    <link rel="icon" href="/assets/Isotype.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <!-- Header content will be loaded dynamically -->
    </header>
    <main>
        <div id="profile-section" class="container" style="display: none;">
            <!-- Profile content will be injected here -->
        </div>
        <div id="landing-page" class="container" style="display: none;">
            <div class="hero-section">
                <img src="/assets/Imagotype.svg" alt="Koby Imagotype" id="imagotype-img" style="max-width: 200px; margin-bottom: 20px;">
                <h2>Welcome to Koby</h2>
                <p>Your personal space to store, view, and share your Kobo e-reader highlights.</p>
                <button id="landing-upload-btn" class="btn-primary">Upload Your Highlights</button>
            </div>

            <div class="social-proof-section">
                <h3>Join a community of avid readers!</h3>
                <p><span id="user-count">...</span> users and <span id="highlight-count">...</span> highlights shared.</p>
            </div>

            <div class="how-it-works-section">
                <h3>How It Works</h3>
                <div class="steps">
                    <div class="step">
                        <i class="fas fa-upload"></i>
                        <h4>1. Upload</h4>
                        <p>Easily upload your Kobo highlights file.</p>
                    </div>
                    <div class="step">
                        <i class="fas fa-chart-bar"></i>
                        <h4>2. Get Insights</h4>
                        <p>Visualize your reading habits and stats.</p>
                    </div>
                    <div class="step">
                        <i class="fas fa-share-alt"></i>
                        <h4>3. Share</h4>
                        <p>Share your favorite highlights with the world.</p>
                    </div>
                </div>
            </div>

            <h3>Trending Highlights</h3>
            <div id="trending-highlights-container"></div>
            <div id="loading-indicator" style="display: none;">Loading...</div>
        </div>
        <div id="main-content" class="container">
        <div id="dashboard">
            <div class="chart-container">
                <canvas id="time-spent-chart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="books-chart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="colors-chart"></canvas>
            </div>
            <div class="chart-container full-width">
                <div id="timeline-filters">
                    <button data-filter="day">Day</button>
                    <button data-filter="week">Week</button>
                    <button data-filter="month">Month</button>
                    <button data-filter="ytd">YTD</button>
                    <button data-filter="1y">1Y</button>
                    <button data-filter="max">MAX</button>
                </div>
                <canvas id="timeline-chart"></canvas>
            </div>
        </div>
        <div class="filters">
            <select id="book-filter">
                <option value="all">All Books</option>
            </select>
            <select id="type-filter">
                <option value="all">All Types</option>
                <option value="highlight">Highlights</option>
                <option value="note">Notes</option>
            </select>
            <select id="color-filter">
                <option value="all">All Colors</option>
                <option value="0">Yellow</option>
                <option value="1">Pink</option>
                <option value="2">Blue</option>
                <option value="3">Green</option>
            </select>
            <select id="sort-filter">
                <option value="random" selected>Random</option>
                <option value="likes_desc">Likes</option>
                <option value="date_desc">Newest First</option>
                <option value="date_asc">Oldest First</option>
                <option value="book_asc">By Book (A-Z)</option>
            </select>
            <input type="text" id="search-input" placeholder="Search highlights...">
        </div>
        <div id="highlights-container"></div>
        </div>
        <div class="dark-mode-toggle">
            <i class="fas fa-moon"></i>
        </div>
    </main>

    <div id="highlight-focus-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <div id="modal-highlight-content"></div>
            <button id="share-button"><i class="fas fa-share-alt"></i> Share</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <script type="module" src="/script.js"></script>
</body>
</html>
